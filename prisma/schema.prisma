// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id_user        Int             @id @default(autoincrement())
  lastname       String          @db.VarChar(100)
  firstname      String          @db.VarChar(100)
  birthday       DateTime        @db.Date
  phone          String          @db.VarChar(30)
  email          String          @db.VarChar(255)
  hashedPassword String          @db.VarChar(255)
  address        String          @db.VarChar(255)
  zipCode        String          @db.VarChar(10)
  city           String          @db.VarChar(150)
  role           String          @default("user") @db.VarChar(50)
  bio            String?         @db.Text
  Orders         Orders[]
  Organisations  Organisations[]
  Draws          Draws[]
}

model Orders {
  id_order Int         @id @default(autoincrement())
  price    Float
  date     DateTime    @db.DateTime(0)
  address  String      @db.VarChar(255)
  zipCode  String      @db.VarChar(10)
  city     String      @db.VarChar(150)
  id_user  Int
  user     Users       @relation(fields: [id_user], references: [id_user])
  Shirts   OrderItem[]
}

model Organisations {
  id_organisation Int     @id @default(autoincrement())
  name            String  @db.VarChar(255)
  phone           String  @db.VarChar(30)
  email           String  @db.VarChar(255)
  address         String  @db.VarChar(255)
  zipCode         String  @db.VarChar(10)
  city            String  @db.VarChar(150)
  id_user         Int
  user            Users   @relation(fields: [id_user], references: [id_user])
  Draws           Draws[]
}

model Themes {
  id_theme Int     @id @default(autoincrement())
  name     String  @db.VarChar(255)
  Draws    Draws[]
}

model Draws {
  id_draw         Int           @id @default(autoincrement())
  name            String        @db.VarChar(255)
  id_user         Int
  user            Users         @relation(fields: [id_user], references: [id_user])
  id_organisation Int
  organisation    Organisations @relation(fields: [id_organisation], references: [id_organisation])
  id_theme        Int
  theme           Themes        @relation(fields: [id_theme], references: [id_theme])
  Sizes           Shirts[]
}

model Shirts {
  id_shirt Int         @id @default(autoincrement())
  price    Float
  id_draw  Int
  draw     Draws       @relation(fields: [id_draw], references: [id_draw])
  id_size  Int
  size     Sizes       @relation(fields: [id_size], references: [id_size])
  Orders   OrderItem[]
}

model Sizes {
  id_size Int      @id @default(autoincrement())
  name    String   @db.VarChar(5)
  Draws   Shirts[]
}

model OrderItem {
  id_orders_has_shirts Int    @id @default(autoincrement())
  quantity             Int
  id_shirt             Int
  shirt                Shirts @relation(fields: [id_shirt], references: [id_shirt])
  id_order             Int
  order                Orders @relation(fields: [id_order], references: [id_order])
}
